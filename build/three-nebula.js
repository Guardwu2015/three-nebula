!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Nebula=e():t.Nebula=e()}(this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=66)}([function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,n){var i=n(30),r=n(16);t.exports=function(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?r(t):e}},function(t,e,n){var i=n(17);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(64);function r(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=r=Reflect.get:t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},r(e,n,o||e)}t.exports=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return a}));var i="BaseRenderer",r="CustomRenderer",o="SpriteRenderer",s="MeshRenderer",a="GPURenderer"},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"h",(function(){return h}));var i="SYSTEM_UPDATE",r="PARTICLE_CREATED",o="PARTICLE_UPDATE",s="PARTICLE_DEAD",a="EMITTER_ADDED",u="EMITTER_REMOVED",c="EMITTER_DEAD",h="SYSTEM_UPDATE_AFTER"},function(t,e,n){var i=n(12),r=n(13);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==i(t)}},function(t,e,n){var i=n(17),r=n(58);function o(e,n,s){return r()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},o.apply(null,arguments)}t.exports=o},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var i=n(1),r=n.n(i),o=n(2),s=n.n(o),a=n(8),u=n(6),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u.a;r()(this,e),this.type=t}return s()(e,[{key:"init",value:function(t){var e=this;this.system=t,this.system.eventDispatcher.addEventListener(a.g,(function(t){e.onSystemUpdate.call(e,t)})),this.system.eventDispatcher.addEventListener(a.d,(function(t){e.onParticleCreated.call(e,t)})),this.system.eventDispatcher.addEventListener(a.f,(function(t){e.onParticleUpdate.call(e,t)})),this.system.eventDispatcher.addEventListener(a.e,(function(t){e.onParticleDead.call(e,t)})),this.logRendererType()}},{key:"remove",value:function(){this.system=null}},{key:"onParticleCreated",value:function(t){}},{key:"onParticleUpdate",value:function(t){}},{key:"onParticleDead",value:function(t){}},{key:"onSystemUpdate",value:function(t){}},{key:"logRendererType",value:function(){t&&t.env}}]),e}()}).call(this,n(65))},function(t,e,n){var i=n(19),r=n(42),o=n(43),s=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?r(t):o(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var i=n(18),r=n(32),o=n(22);t.exports=function(t){return(o(t)?i:r)(t)}},function(t,e,n){var i=n(59),r=n(60),o=n(61),s=n(62);t.exports=function(t){return i(t)||r(t)||o(t)||s()}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e,n){var i=n(31);t.exports=function(t){var e=t.length;return e?t[i(0,e-1)]:void 0}},function(t,e,n){var i=n(20).Symbol;t.exports=i},function(t,e,n){var i=n(21),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(41))},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}},function(t,e,n){var i,r,o=n(28),s=n(29),a=0,u=0;t.exports=function(t,e,n){var c=e&&n||0,h=e||[],l=(t=t||{}).node||i,f=void 0!==t.clockseq?t.clockseq:r;if(null==l||null==f){var d=o();null==l&&(l=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=r=16383&(d[6]<<8|d[7]))}var y=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:u+1,v=y-a+(p-u)/1e4;if(v<0&&void 0===t.clockseq&&(f=f+1&16383),(v<0||y>a)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=y,u=p,r=f;var m=(1e4*(268435455&(y+=122192928e5))+p)%4294967296;h[c++]=m>>>24&255,h[c++]=m>>>16&255,h[c++]=m>>>8&255,h[c++]=255&m;var g=y/4294967296*1e4&268435455;h[c++]=g>>>8&255,h[c++]=255&g,h[c++]=g>>>24&15|16,h[c++]=g>>>16&255,h[c++]=f>>>8|128,h[c++]=255&f;for(var x=0;x<6;++x)h[c+x]=l[x];return e||s(h)}},function(t,e,n){var i=n(63);t.exports=function(t,e){if(null==t)return{};var n,r,o=i(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var r=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),r[e]=t>>>((3&e)<<3)&255;return r}}},function(t,e){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(t,e){var i=e||0,r=n;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){var n=Math.floor,i=Math.random;t.exports=function(t,e){return t+n(i()*(e-t+1))}},function(t,e,n){var i=n(18),r=n(33);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(34),r=n(36);t.exports=function(t){return null==t?[]:i(t,r(t))}},function(t,e,n){var i=n(35);t.exports=function(t,e){return i(e,(function(e){return t[e]}))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e,n){var i=n(37),r=n(51),o=n(55);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var i=n(38),r=n(39),o=n(22),s=n(44),a=n(46),u=n(47),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),h=!n&&r(t),l=!n&&!h&&s(t),f=!n&&!h&&!l&&u(t),d=n||h||l||f,y=d?i(t.length,String):[],p=y.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,p))||y.push(v);return y}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(40),r=n(13),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,n){var i=n(12),r=n(13);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(19),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){(function(t){var i=n(20),r=n(45),o=e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.Buffer:void 0,u=(a?a.isBuffer:void 0)||r;t.exports=u}).call(this,n(23)(t))},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var i=n(48),r=n(49),o=n(50),s=o&&o.isTypedArray,a=s?r(s):i;t.exports=a},function(t,e,n){var i=n(12),r=n(24),o=n(13),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!s[i(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(21),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r&&i.process,a=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(this,n(23)(t))},function(t,e,n){var i=n(52),r=n(53),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(54)(Object.keys,Object);t.exports=i},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(56),r=n(24);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},function(t,e,n){var i=n(12),r=n(57);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){var i=n(25);t.exports=function(t){if(Array.isArray(t))return i(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var i=n(25);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}},function(t,e,n){var i=n(0);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t}},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new y(t,e)),1!==c.length||h||a(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e),n.d(e,"Alpha",(function(){return yn})),n.d(e,"Attraction",(function(){return vn})),n.d(e,"Collision",(function(){return gn})),n.d(e,"Color",(function(){return bn})),n.d(e,"CrossZone",(function(){return wn})),n.d(e,"Force",(function(){return Rn})),n.d(e,"Gravity",(function(){return Mn})),n.d(e,"RandomDrift",(function(){return On})),n.d(e,"Repulsion",(function(){return Sn})),n.d(e,"Rotate",(function(){return An})),n.d(e,"Scale",(function(){return Cn})),n.d(e,"Spring",(function(){return Bn})),n.d(e,"Debug",(function(){return Yn})),n.d(e,"log",(function(){return Xn})),n.d(e,"ease",(function(){return R})),n.d(e,"easeLinear",(function(){return k})),n.d(e,"easeInQuad",(function(){return M})),n.d(e,"easeOutQuad",(function(){return P})),n.d(e,"easeInOutQuad",(function(){return O})),n.d(e,"easeInCubic",(function(){return E})),n.d(e,"easeOutCubic",(function(){return S})),n.d(e,"easeInOutCubic",(function(){return T})),n.d(e,"easeInQuart",(function(){return A})),n.d(e,"easeOutQuart",(function(){return j})),n.d(e,"easeInOutQuart",(function(){return C})),n.d(e,"easeInSine",(function(){return D})),n.d(e,"easeOutSine",(function(){return B})),n.d(e,"easeInOutSine",(function(){return V})),n.d(e,"easeInExpo",(function(){return I})),n.d(e,"easeOutExpo",(function(){return F})),n.d(e,"easeInOutExpo",(function(){return Z})),n.d(e,"easeInCirc",(function(){return L})),n.d(e,"easeOutCirc",(function(){return N})),n.d(e,"easeInOutCirc",(function(){return U})),n.d(e,"easeInBack",(function(){return q})),n.d(e,"easeOutBack",(function(){return Y})),n.d(e,"easeInOutBack",(function(){return X})),n.d(e,"setEasingByName",(function(){return J})),n.d(e,"getEasingByName",(function(){return G})),n.d(e,"FollowEmitter",(function(){return Gn})),n.d(e,"Emitter",(function(){return un})),n.d(e,"Body",(function(){return Ht})),n.d(e,"BodySprite",(function(){return re})),n.d(e,"InitializerUtil",(function(){return se})),n.d(e,"Life",(function(){return ue})),n.d(e,"Mass",(function(){return he})),n.d(e,"Position",(function(){return Ze})),n.d(e,"Radius",(function(){return Ne})),n.d(e,"Rate",(function(){return qe})),n.d(e,"Texture",(function(){return Ge})),n.d(e,"VectorVelocity",(function(){return nn})),n.d(e,"PolarVelocity",(function(){return Ke})),n.d(e,"RadialVelocity",(function(){return tn})),n.d(e,"ArraySpan",(function(){return Mt})),n.d(e,"createArraySpan",(function(){return Pt})),n.d(e,"ColorSpan",(function(){return Et})),n.d(e,"createColorSpan",(function(){return St})),n.d(e,"Box",(function(){return Tt})),n.d(e,"integrate",(function(){return Vt})),n.d(e,"MathUtils",(function(){return bt})),n.d(e,"Polar3D",(function(){return Zt})),n.d(e,"Span",(function(){return _t})),n.d(e,"createSpan",(function(){return wt})),n.d(e,"Vector3D",(function(){return Ft})),n.d(e,"INTEGRATION_TYPE_EULER",(function(){return At})),n.d(e,"INTEGRATION_TYPE_RK2",(function(){return jt})),n.d(e,"INTEGRATION_TYPE_RK4",(function(){return Ct})),n.d(e,"INTEGRATION_TYPE_VERLET",(function(){return Dt})),n.d(e,"CustomRenderer",(function(){return Wn})),n.d(e,"MeshRenderer",(function(){return $n})),n.d(e,"SpriteRenderer",(function(){return ii})),n.d(e,"GPURenderer",(function(){return gi})),n.d(e,"ColorUtil",(function(){return et})),n.d(e,"PUID",(function(){return nt})),n.d(e,"THREEUtil",(function(){return ut})),n.d(e,"Util",(function(){return ct})),n.d(e,"uid",(function(){return lt})),n.d(e,"withDefaults",(function(){return dt})),n.d(e,"BoxZone",(function(){return xe})),n.d(e,"LineZone",(function(){return _e})),n.d(e,"MeshZone",(function(){return ze})),n.d(e,"PointZone",(function(){return ke})),n.d(e,"ScreenZone",(function(){return Ee})),n.d(e,"SphereZone",(function(){return Ve})),n.d(e,"System",(function(){return qn})),n.d(e,"Particle",(function(){return Lt})),n.d(e,"Pool",(function(){return qt}));var i={};n.r(i),n.d(i,"BoxZone",(function(){return xe})),n.d(i,"LineZone",(function(){return _e})),n.d(i,"MeshZone",(function(){return ze})),n.d(i,"PointZone",(function(){return ke})),n.d(i,"ScreenZone",(function(){return Ee})),n.d(i,"SphereZone",(function(){return Ve}));var r={};n.r(r),n.d(r,"Body",(function(){return Ht})),n.d(r,"BodySprite",(function(){return re})),n.d(r,"InitializerUtil",(function(){return se})),n.d(r,"Life",(function(){return ue})),n.d(r,"Mass",(function(){return he})),n.d(r,"Position",(function(){return Ze})),n.d(r,"Radius",(function(){return Ne})),n.d(r,"Rate",(function(){return qe})),n.d(r,"Texture",(function(){return Ge})),n.d(r,"VectorVelocity",(function(){return nn})),n.d(r,"PolarVelocity",(function(){return Ke})),n.d(r,"RadialVelocity",(function(){return tn}));var o={};n.r(o),n.d(o,"Alpha",(function(){return yn})),n.d(o,"Attraction",(function(){return vn})),n.d(o,"Collision",(function(){return gn})),n.d(o,"Color",(function(){return bn})),n.d(o,"CrossZone",(function(){return wn})),n.d(o,"Force",(function(){return Rn})),n.d(o,"Gravity",(function(){return Mn})),n.d(o,"RandomDrift",(function(){return On})),n.d(o,"Repulsion",(function(){return Sn})),n.d(o,"Rotate",(function(){return An})),n.d(o,"Scale",(function(){return Cn})),n.d(o,"Spring",(function(){return Bn}));var s,a,u,c,h,l,f,d,y,p,v=n(1),m=n.n(v),g=n(2),x=n.n(g),b=["BodySprite","Texture"],_=n(6),w=3.142,z=w/180,R={easeLinear:function(t){return t},easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInSine:function(t){return 1-Math.cos(t*(w/2))},easeOutSine:function(t){return Math.sin(t*(w/2))},easeInOutSine:function(t){return-.5*(Math.cos(w*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}},k=R.easeLinear,M=R.easeInQuad,P=R.easeOutQuad,O=R.easeInOutQuad,E=R.easeInCubic,S=R.easeOutCubic,T=R.easeInOutCubic,A=R.easeInQuart,j=R.easeOutQuart,C=R.easeInOutQuart,D=R.easeInSine,B=R.easeOutSine,V=R.easeInOutSine,I=R.easeInExpo,F=R.easeOutExpo,Z=R.easeInOutExpo,L=R.easeInCirc,N=R.easeOutCirc,U=R.easeInOutCirc,q=R.easeInBack,Y=R.easeOutBack,X=R.easeInOutBack,J=function(t){return R[t]?R[t]:R.easeLinear},G=function(t){return R[t]?R[t]:R.easeLinear},Q=k,H=["Position","Life","Radius","Mass","Body","BodySprite","Texture","PolarVelocity","RadialVelocity","VectorVelocity"],W=["Alpha","Attraction","Color","CrossZone","Force","Gravity","RandomDrift","Repulsion","Rotate","Scale","Spring"],K=(_.e,["BoxZone","LineZone","MeshZone","PointZone","SphereZone"]),$=n(7),tt=n.n($),et={getRGB:function(t){var e={};if("number"==typeof t)i=Math.floor(t),e.r=(t>>16&255)/255,e.g=(t>>8&255)/255,e.b=(255&t)/255;else if("string"==typeof t){var n;if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(t))e.r=Math.min(255,parseInt(n[1],10))/255,e.g=Math.min(255,parseInt(n[2],10))/255,e.b=Math.min(255,parseInt(n[3],10))/255;else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var i=n[1];e.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,e.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,e.b=parseInt(i.charAt(4)+i.charAt(5),16)/255}}else e.r=t.r,e.g=t.g,e.b=t.b;return e}},nt={_id:0,_uids:{},getNewId:function(){return"PUID_".concat(this._id++)},id:function(t){for(var e in this._uids)if(this._uids[e]==t)return e;var n=this.getNewId();return this._uids[n]=t,n}},it={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*it.DEG2RAD},radToDeg:function(t){return t*it.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function rt(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function ot(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function st(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function at(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||at.DefaultOrder}Object.assign(rt,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,s){var a=n[i+0],u=n[i+1],c=n[i+2],h=n[i+3],l=r[o+0],f=r[o+1],d=r[o+2],y=r[o+3];if(h!==y||a!==l||u!==f||c!==d){var p=1-s,v=a*l+u*f+c*d+h*y,m=v>=0?1:-1,g=1-v*v;if(g>Number.EPSILON){var x=Math.sqrt(g),b=Math.atan2(x,v*m);p=Math.sin(p*b)/x,s=Math.sin(s*b)/x}var _=s*m;if(a=a*p+l*_,u=u*p+f*_,c=c*p+d*_,h=h*p+y*_,p===1-s){var w=1/Math.sqrt(a*a+u*u+c*c+h*h);a*=w,u*=w,c*=w,h*=w}}t[e]=a,t[e+1]=u,t[e+2]=c,t[e+3]=h}}),Object.defineProperties(rt.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(rt.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,s=Math.cos,a=Math.sin,u=s(n/2),c=s(i/2),h=s(r/2),l=a(n/2),f=a(i/2),d=a(r/2);return"XYZ"===o?(this._x=l*c*h+u*f*d,this._y=u*f*h-l*c*d,this._z=u*c*d+l*f*h,this._w=u*c*h-l*f*d):"YXZ"===o?(this._x=l*c*h+u*f*d,this._y=u*f*h-l*c*d,this._z=u*c*d-l*f*h,this._w=u*c*h+l*f*d):"ZXY"===o?(this._x=l*c*h-u*f*d,this._y=u*f*h+l*c*d,this._z=u*c*d+l*f*h,this._w=u*c*h-l*f*d):"ZYX"===o?(this._x=l*c*h-u*f*d,this._y=u*f*h+l*c*d,this._z=u*c*d-l*f*h,this._w=u*c*h+l*f*d):"YZX"===o?(this._x=l*c*h+u*f*d,this._y=u*f*h+l*c*d,this._z=u*c*d-l*f*h,this._w=u*c*h-l*f*d):"XZY"===o&&(this._x=l*c*h-u*f*d,this._y=u*f*h-l*c*d,this._z=u*c*d+l*f*h,this._w=u*c*h+l*f*d),!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],u=n[9],c=n[2],h=n[6],l=n[10],f=i+a+l;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(h-u)*e,this._y=(o-c)*e,this._z=(s-r)*e):i>a&&i>l?(e=2*Math.sqrt(1+i-a-l),this._w=(h-u)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(o+c)/e):a>l?(e=2*Math.sqrt(1+a-i-l),this._w=(o-c)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(u+h)/e):(e=2*Math.sqrt(1+l-i-a),this._w=(s-r)/e,this._x=(o+c)/e,this._y=(u+h)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(it.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,s=e._x,a=e._y,u=e._z,c=e._w;return this._x=n*c+o*s+i*u-r*a,this._y=i*c+o*a+r*s-n*u,this._z=r*c+o*u+n*a-i*s,this._w=o*c-n*s-i*a-r*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,s=o*t._w+n*t._x+i*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var a=1-s*s;if(a<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*i+e*this._y,this._z=u*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(a),h=Math.atan2(c,s),l=Math.sin((1-e)*h)/c,f=Math.sin(e*h)/c;return this._w=o*l+this._w*f,this._x=n*l+this._x*f,this._y=i*l+this._y*f,this._z=r*l+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(ot.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:(a=new rt,function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(a.setFromEuler(t))}),applyAxisAngle:function(){var t=new rt;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*i-s*n,c=a*n+s*e-r*i,h=a*i+r*n-o*e,l=-r*e-o*n-s*i;return this.x=u*a+l*-r+c*-s-h*-o,this.y=c*a+l*-o+h*-r-u*-s,this.z=h*a+l*-s+u*-o-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=i*a-r*s,this.y=r*o-n*a,this.z=n*s-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:(s=new ot,function(t){return s.copy(this).projectOnVector(t),this.sub(s)}),reflect:function(){var t=new ot;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(it.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(st.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,o,s,a,u,c,h,l,f,d,y,p){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=s,v[13]=a,v[2]=u,v[6]=c,v[10]=h,v[14]=l,v[3]=f,v[7]=d,v[11]=y,v[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new st).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new ot;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(i),u=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){var l=o*c,f=o*h,d=s*c,y=s*h;e[0]=a*c,e[4]=-a*h,e[8]=u,e[1]=f+d*u,e[5]=l-y*u,e[9]=-s*a,e[2]=y-l*u,e[6]=d+f*u,e[10]=o*a}else if("YXZ"===t.order){var p=a*c,v=a*h,m=u*c,g=u*h;e[0]=p+g*s,e[4]=m*s-v,e[8]=o*u,e[1]=o*h,e[5]=o*c,e[9]=-s,e[2]=v*s-m,e[6]=g+p*s,e[10]=o*a}else if("ZXY"===t.order){p=a*c,v=a*h,m=u*c,g=u*h;e[0]=p-g*s,e[4]=-o*h,e[8]=m+v*s,e[1]=v+m*s,e[5]=o*c,e[9]=g-p*s,e[2]=-o*u,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){l=o*c,f=o*h,d=s*c,y=s*h;e[0]=a*c,e[4]=d*u-f,e[8]=l*u+y,e[1]=a*h,e[5]=y*u+l,e[9]=f*u-d,e[2]=-u,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){var x=o*a,b=o*u,_=s*a,w=s*u;e[0]=a*c,e[4]=w-x*h,e[8]=_*h+b,e[1]=h,e[5]=o*c,e[9]=-s*c,e[2]=-u*c,e[6]=b*h+_,e[10]=x-w*h}else if("XZY"===t.order){x=o*a,b=o*u,_=s*a,w=s*u;e[0]=a*c,e[4]=-h,e[8]=u*c,e[1]=x*h+w,e[5]=o*c,e[9]=b*h-_,e[2]=_*h-b,e[6]=s*c,e[10]=w*h+x}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:(d=new ot(0,0,0),y=new ot(1,1,1),function(t){return this.compose(d,t,y)}),lookAt:(h=new ot,l=new ot,f=new ot,function(t,e,n){var i=this.elements;return f.subVectors(t,e),0===f.lengthSq()&&(f.z=1),f.normalize(),h.crossVectors(n,f),0===h.lengthSq()&&(1===Math.abs(n.z)?f.x+=1e-4:f.z+=1e-4,f.normalize(),h.crossVectors(n,f)),h.normalize(),l.crossVectors(f,h),i[0]=h.x,i[4]=l.x,i[8]=f.x,i[1]=h.y,i[5]=l.y,i[9]=f.y,i[2]=h.z,i[6]=l.z,i[10]=f.z,this}),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],s=n[4],a=n[8],u=n[12],c=n[1],h=n[5],l=n[9],f=n[13],d=n[2],y=n[6],p=n[10],v=n[14],m=n[3],g=n[7],x=n[11],b=n[15],_=i[0],w=i[4],z=i[8],R=i[12],k=i[1],M=i[5],P=i[9],O=i[13],E=i[2],S=i[6],T=i[10],A=i[14],j=i[3],C=i[7],D=i[11],B=i[15];return r[0]=o*_+s*k+a*E+u*j,r[4]=o*w+s*M+a*S+u*C,r[8]=o*z+s*P+a*T+u*D,r[12]=o*R+s*O+a*A+u*B,r[1]=c*_+h*k+l*E+f*j,r[5]=c*w+h*M+l*S+f*C,r[9]=c*z+h*P+l*T+f*D,r[13]=c*R+h*O+l*A+f*B,r[2]=d*_+y*k+p*E+v*j,r[6]=d*w+y*M+p*S+v*C,r[10]=d*z+y*P+p*T+v*D,r[14]=d*R+y*O+p*A+v*B,r[3]=m*_+g*k+x*E+b*j,r[7]=m*w+g*M+x*S+b*C,r[11]=m*z+g*P+x*T+b*D,r[15]=m*R+g*O+x*A+b*B,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new ot;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],s=t[5],a=t[9],u=t[13],c=t[2],h=t[6],l=t[10],f=t[14];return t[3]*(+r*a*h-i*u*h-r*s*l+n*u*l+i*s*f-n*a*f)+t[7]*(+e*a*f-e*u*l+r*o*l-i*o*f+i*u*c-r*a*c)+t[11]*(+e*u*h-e*s*f-r*o*h+n*o*f+r*s*c-n*u*c)+t[15]*(-i*s*c-e*a*h+e*s*l+i*o*h-n*o*l+n*a*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],s=i[2],a=i[3],u=i[4],c=i[5],h=i[6],l=i[7],f=i[8],d=i[9],y=i[10],p=i[11],v=i[12],m=i[13],g=i[14],x=i[15],b=d*g*l-m*y*l+m*h*p-c*g*p-d*h*x+c*y*x,_=v*y*l-f*g*l-v*h*p+u*g*p+f*h*x-u*y*x,w=f*m*l-v*d*l+v*c*p-u*m*p-f*c*x+u*d*x,z=v*d*h-f*m*h-v*c*y+u*m*y+f*c*g-u*d*g,R=r*b+o*_+s*w+a*z;if(0===R){var k="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(k);return console.warn(k),this.identity()}var M=1/R;return n[0]=b*M,n[1]=(m*y*a-d*g*a-m*s*p+o*g*p+d*s*x-o*y*x)*M,n[2]=(c*g*a-m*h*a+m*s*l-o*g*l-c*s*x+o*h*x)*M,n[3]=(d*h*a-c*y*a-d*s*l+o*y*l+c*s*p-o*h*p)*M,n[4]=_*M,n[5]=(f*g*a-v*y*a+v*s*p-r*g*p-f*s*x+r*y*x)*M,n[6]=(v*h*a-u*g*a-v*s*l+r*g*l+u*s*x-r*h*x)*M,n[7]=(u*y*a-f*h*a+f*s*l-r*y*l-u*s*p+r*h*p)*M,n[8]=w*M,n[9]=(v*d*a-f*m*a-v*o*p+r*m*p+f*o*x-r*d*x)*M,n[10]=(u*m*a-v*c*a+v*o*l-r*m*l-u*o*x+r*c*x)*M,n[11]=(f*c*a-u*d*a-f*o*l+r*d*l+u*o*p-r*c*p)*M,n[12]=z*M,n[13]=(f*m*s-v*d*s+v*o*y-r*m*y-f*o*g+r*d*g)*M,n[14]=(v*c*s-u*m*s-v*o*h+r*m*h+u*o*g-r*c*g)*M,n[15]=(u*d*s-f*c*s+f*o*h-r*d*h-u*o*y+r*c*y)*M,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,s=t.y,a=t.z,u=r*o,c=r*s;return this.set(u*o+n,u*s-i*a,u*a+i*s,0,u*s+i*a,c*s+n,c*a-i*o,0,u*a-i*s,c*a+i*o,r*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,o=e._y,s=e._z,a=e._w,u=r+r,c=o+o,h=s+s,l=r*u,f=r*c,d=r*h,y=o*c,p=o*h,v=s*h,m=a*u,g=a*c,x=a*h,b=n.x,_=n.y,w=n.z;return i[0]=(1-(y+v))*b,i[1]=(f+x)*b,i[2]=(d-g)*b,i[3]=0,i[4]=(f-x)*_,i[5]=(1-(l+v))*_,i[6]=(p+m)*_,i[7]=0,i[8]=(d+g)*w,i[9]=(p-m)*w,i[10]=(1-(l+y))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:(u=new ot,c=new st,function(t,e,n){var i=this.elements,r=u.set(i[0],i[1],i[2]).length(),o=u.set(i[4],i[5],i[6]).length(),s=u.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],c.copy(this);var a=1/r,h=1/o,l=1/s;return c.elements[0]*=a,c.elements[1]*=a,c.elements[2]*=a,c.elements[4]*=h,c.elements[5]*=h,c.elements[6]*=h,c.elements[8]*=l,c.elements[9]*=l,c.elements[10]*=l,e.setFromRotationMatrix(c),n.x=r,n.y=o,n.z=s,this}),makePerspective:function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*r/(e-t),u=2*r/(n-i),c=(e+t)/(e-t),h=(n+i)/(n-i),l=-(o+r)/(o-r),f=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=u,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=l,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,n,i,r,o){var s=this.elements,a=1/(e-t),u=1/(n-i),c=1/(o-r),h=(e+t)*a,l=(n+i)*u,f=(o+r)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-l,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}),at.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],at.DefaultOrder="XYZ",Object.defineProperties(at.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(at.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=it.clamp,r=t.elements,o=r[0],s=r[4],a=r[8],u=r[1],c=r[5],h=r[9],l=r[2],f=r[6],d=r[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(a,d),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-l,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-l,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(u,o))):"ZYX"===e?(this._y=Math.asin(-i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(f,d),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-l,o)):(this._x=0,this._y=Math.atan2(a,d))):"XZY"===e?(this._z=Math.asin(-i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(){var t=new st;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:(p=new rt,function(t){return p.setFromEuler(this),this.setFromQuaternion(p,t)}),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new ot(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var ut={toScreenPos:function(){var t=new ot;return function(e,n,i){return t.copy(e),t.project(n),t.x=Math.round((t.x+1)*i.width/2),t.y=Math.round((1-t.y)*i.height/2),t.z=0,t}}(),toSpacePos:function(){var t,e=new ot,n=new ot;return function(i,r,o){return e.set(i.x/o.width*2-1,-i.y/o.height*2+1,.5),e.unproject(r),n.copy(e.sub(r.position).normalize()),t=-r.position.z/n.z,e.copy(r.position),e.add(n.multiplyScalar(t)),e}}()},ct={initValue:function(t,e){return null!=t&&null!=t?t:e},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},destroyArray:function(t){t.length=0},destroyObject:function(t){for(var e in t)delete t[e]},isUndefined:function(){for(var t in arguments){var e=arguments[t];if(void 0!==e)return!1}return!0},setVectorByObj:function(t,e){void 0!==e.x&&(t.position.x=e.x),void 0!==e.y&&(t.position.y=e.y),void 0!==e.z&&(t.position.z=e.z),void 0!==e.vx&&(t.velocity.x=e.vx),void 0!==e.vy&&(t.velocity.y=e.vy),void 0!==e.vz&&(t.velocity.z=e.vz),void 0!==e.ax&&(t.acceleration.x=e.ax),void 0!==e.ay&&(t.acceleration.y=e.ay),void 0!==e.az&&(t.acceleration.z=e.az),void 0!==e.p&&t.position.copy(e.p),void 0!==e.v&&t.velocity.copy(e.v),void 0!==e.a&&t.acceleration.copy(e.a),void 0!==e.position&&t.position.copy(e.position),void 0!==e.velocity&&t.velocity.copy(e.velocity),void 0!==e.accelerate&&t.acceleration.copy(e.accelerate)},setPrototypeByObj:function(t,e,n){for(var i in e)t.hasOwnProperty(i)&&(n?n.indexOf(i)<0&&(t[i]=this._getValue(e[i])):t[i]=this._getValue(e[i]));return t},_getValue:function(t){return"Span"===t.constructor.type?t.getValue():t}},ht=n(26),lt=n.n(ht).a;function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var dt=function(t,e){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{},e)},yt=n(3),pt=n.n(yt),vt=n(0),mt=n.n(vt),gt=n(4),xt=n.n(gt),bt={randomAToB:function(t,e,n){return n?(Math.random()*(e-t)>>0)+t:t+Math.random()*(e-t)},randomFloating:function(t,e,n){return this.randomAToB(t-e,t+e,n)},randomZone:function(t){},degreeTransform:function(t){return t*w/180},toColor16:function(t){return"#"+t.toString(16)},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)},lerp:function(t,e,n){return e+(t-e)*n},getNormal:function(t,e){return 0==t.x&&0==t.y?0==t.z?e.set(1,0,1):e.set(1,1,-t.y/t.z):0==t.x?e.set(1,0,1):e.set(-t.y/t.x,1,1),e.normalize()},axisRotate:function(t,e,n,i){var r=Math.cos(i),o=Math.sin(i),s=n.dot(e)*(1-r);t.copy(n),t.cross(e).scalar(o),t.addValue(e.x*r,e.y*r,e.z*r),t.addValue(n.x*s,n.y*s,n.z*s)}},_t=function(){function t(e,n,i){m()(this,t),this._isArray=!1,this.type="Span",ct.isArray(e)?(this._isArray=!0,this.a=e):(this.a=ct.initValue(e,1),this.b=ct.initValue(n,this.a),this._center=ct.initValue(i,!1))}return x()(t,[{key:"getValue",value:function(t){return this._isArray?this.a[this.a.length*Math.random()>>0]:this._center?bt.randomFloating(this.a,this.b,t):bt.randomAToB(this.a,this.b,t)}}]),t}(),wt=function(t,e,n){return t instanceof _t?t:void 0===e?new _t(t):void 0===n?new _t(t,e):new _t(t,e,n)},zt=n(14),Rt=n.n(zt);function kt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Mt=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(kt()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t){var e;return m()(this,i),(e=n.call(this)).type="ArraySpan",e.items=Array.isArray(t)?t:[t],e}return x()(i,[{key:"getValue",value:function(){return Rt()(this.items)}}]),i}(_t),Pt=function(t){return t?t instanceof Mt?t:new Mt(t):null};function Ot(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Et=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Ot()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t){var e;return m()(this,i),(e=n.call(this)).type="ColorSpan",e.shouldRandomize="random"===t,e.colors=Array.isArray(t)?t:[t],e}return x()(i,[{key:"getValue",value:function(){return this.shouldRandomize?bt.randomColor():Rt()(this.colors)}}]),i}(_t),St=function(t){return t?t instanceof Et?t:new Et(t):null},Tt=function(){function t(e,n,i,r,o,s){m()(this,t),this.type="Box",this.x=e,this.y=n,this.z=i,this.width=r,this.height=o,this.depth=s,this.bottom=this.y+this.height,this.right=this.x+this.width,this.right=this.x+this.width}return x()(t,[{key:"contains",value:function(t,e,n){return t<=this.right&&t>=this.x&&e<=this.bottom&&e>=this.y&&n<=this.depth&&n>=this.z}}]),t}(),At="EULER",jt="RUNGE_KUTTA_2",Ct="RUNGE_KUTTA_4",Dt="VERLET",Bt=function(t,e,n){t.sleep||(t.old.position.copy(t.position),t.old.velocity.copy(t.velocity),t.acceleration.scalar(1/t.mass),t.velocity.add(t.acceleration.scalar(e)),t.position.add(t.old.velocity.scalar(e)),n&&t.velocity.scalar(n),t.acceleration.clear())},Vt=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:At;switch(i){case At:Bt(t,e,n);break;default:Bt(t,e,n)}};function It(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ft=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(It()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(){return m()(this,i),n.apply(this,arguments)}return x()(i,[{key:"clear",value:function(){return this.x=0,this.y=0,this.z=0,this}},{key:"scalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"addValue",value:function(t,e,n){return this.x+=t,this.y+=e,this.z+=n,this}},{key:"toString",value:function(){return"x:"+this.x+"y:"+this.y+"z:"+this.z}},{key:"eulerFromDir",value:function(t){return(new at).setFromVector3(t)}}]),i}(ot),Zt=function(){function t(e,n,i){m()(this,t),this.type="Polar3D",this.radius=e||1,this.phi=i||0,this.theta=n||0}return x()(t,[{key:"set",value:function(t,e,n){return this.radius=t||1,this.phi=n||0,this.theta=e||0,this}},{key:"setRadius",value:function(t){return this.radius=t,this}},{key:"setPhi",value:function(t){return this.phi=t,this}},{key:"setTheta",value:function(t){return this.theta=t,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"toVector3D",value:function(){return new Ft(this.getX(),this.getY(),this.getZ())}},{key:"getX",value:function(){return this.radius*Math.sin(this.theta)*Math.cos(this.phi)}},{key:"getY",value:function(){return-this.radius*Math.sin(this.theta)*Math.sin(this.phi)}},{key:"getZ",value:function(){return this.radius*Math.cos(this.theta)}},{key:"normalize",value:function(){return this.radius=1,this}},{key:"equals",value:function(t){return t.radius===this.radius&&t.phi===this.phi&&t.theta===this.theta}},{key:"clear",value:function(){return this.radius=0,this.phi=0,this.theta=0,this}},{key:"clone",value:function(){return new t(this.radius,this.phi,this.theta)}}]),t}(),Lt=function(){function t(e){m()(this,t),this.id="particle-".concat(lt()),this.type="Particle",this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.useColor=!1,this.useAlpha=!1,this.easing=Q,this.position=new Ft,this.velocity=new Ft,this.acceleration=new Ft,this.old={},this.old.position=this.position.clone(),this.old.velocity=this.velocity.clone(),this.old.acceleration=this.acceleration.clone(),this.behaviours=[],this.transform={},this.color={r:0,g:0,b:0},this.rotation=new Ft,this.distanceToCamera=0,ct.setPrototypeByObj(this,e)}return x()(t,[{key:"getDirection",value:function(){return Math.atan2(this.velocity.x,-this.velocity.y)*(180/w)}},{key:"reset",value:function(){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.body=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.useColor=!1,this.useAlpha=!1,this.easing=Q,this.position.set(0,0,0),this.velocity.set(0,0,0),this.acceleration.set(0,0,0),this.old.position.set(0,0,0),this.old.velocity.set(0,0,0),this.old.acceleration.set(0,0,0),this.color.r=0,this.color.g=0,this.color.b=0,this.rotation.clear(),ct.destroyObject(this.transform),this.removeAllBehaviours(),this}},{key:"update",value:function(t,e){if(!this.sleep){this.age+=t;for(var n=this.behaviours.length;n--;){var i=this.behaviours[n];i&&i.applyBehaviour(this,t,e)}}if(this.age>=this.life)this.destroy();else{var r=this.easing(this.age/this.life);this.energy=Math.max(1-r,0)}}},{key:"addBehaviour",value:function(t){this.behaviours.push(t),t.initialize(this)}},{key:"addBehaviours",value:function(t){for(var e=t.length;e--;)this.addBehaviour(t[e])}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);e>-1&&this.behaviours.splice(e,1)}},{key:"removeAllBehaviours",value:function(){ct.destroyArray(this.behaviours)}},{key:"destroy",value:function(){this.removeAllBehaviours(),this.energy=0,this.dead=!0,this.parent=null}}]),t}(),Nt=n(10),Ut=n.n(Nt),qt=function(){function t(){m()(this,t),this.type="Pool",this.cID=0,this.list={}}return x()(t,[{key:"create",value:function(t){if(!this.canCreateNewObject(t))throw new Error("The pool is unable to create or clone the object supplied");if(this.cID++,this.canInstantiateObject(t)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Ut()(t,n)}if(this.canCloneObject(t))return t.clone()}},{key:"canInstantiateObject",value:function(t){return"function"==typeof t}},{key:"canCloneObject",value:function(t){return t.clone&&"function"==typeof t.clone}},{key:"canCreateNewObject",value:function(t){return!(!this.canInstantiateObject(t)&&!this.canCloneObject(t))}},{key:"getCount",value:function(){var t=0;for(var e in this.list)t+=this.list[e].length;return t++}},{key:"get",value:function(t){for(var e,n=t.__puid||nt.id(t),i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return(e=this.list[n]&&this.list[n].length>0?this.list[n].pop():this.create.apply(this,[t].concat(r))).__puid=t.__puid||n,e}},{key:"expire",value:function(t){return this._getList(t.__puid).push(t)}},{key:"destroy",value:function(){for(var t in this.list)this.list[t].length=0,delete this.list[t]}},{key:"_getList",value:function(t){return t=t||"default",this.list[t]||(this.list[t]=[]),this.list[t]}}]),t}(),Yt=function(){function t(){m()(this,t),this.listeners=null}return x()(t,[{key:"addEventListener",value:function(t,e){return this.listeners?this.removeEventListener(t,e):this.listeners={},this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e),e}},{key:"removeEventListener",value:function(t,e){if(this.listeners&&this.listeners[t])for(var n=this.listeners[t],i=0,r=n.length;i<r;i++)if(n[i]==e){1==r?delete this.listeners[t]:n.splice(i,1);break}}},{key:"removeAllEventListeners",value:function(t){t?this.listeners&&delete this.listeners[t]:this.listeners=null}},{key:"dispatchEvent",value:function(t,e){var n=!1,i=this.listeners;if(t&&i){var r=i[t];if(!r)return n;for(var o,s=(r=r.slice()).length;s--;)o=r[s],n=n||o(e)}return!!n}},{key:"hasEventListener",value:function(t){var e=this.listeners;return!(!e||!e[t])}},{key:"listeners",set:function(t){this._listeners=t},get:function(){return this._listeners}}]),t}(),Xt=n(8),Jt=Yt,Gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Initializer",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];m()(this,t),this.type=e,this.isEnabled=n}return x()(t,[{key:"init",value:function(t,e){this.isEnabled&&(e?(this.initialize(e),e.hasBeenInitialized=!0):(this.initialize(t),t.hasBeenInitialized=!0))}},{key:"reset",value:function(){}},{key:"initialize",value:function(t){}}],[{key:"requiresWebGlApi",value:function(){return!1}},{key:"fromJSON",value:function(t){}}]),t}();function Qt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ht=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Qt()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(o=n.call(this,"Body",s)).body=Pt(t),o.w=e,o.h=r||e,o}return x()(i,[{key:"initialize",value:function(t){var e=this.body.getValue();this.w?t.body={width:this.w,height:this.h,body:e}:t.body=e}}],[{key:"fromJSON",value:function(t){var e=t.body,n=t.width,r=t.height,o=t.isEnabled;return new i(e,n,r,void 0===o||o)}}]),i}(Gt);function Wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var Kt={AdditiveBlending:2,CustomBlending:5,MultiplyBlending:4,NoBlending:0,NormalBlending:1,SubtractiveBlending:3},$t={color:16711680,blending:2,fog:!0},te=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},$t,{blending:"AdditiveBlending"});function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var re=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(ie()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];m()(this,i),r=n.call(this,"BodySprite",s);var a=t.Sprite,u=t.SpriteMaterial,c=t.TextureLoader;return r.materialProperties=dt($t,o),(new c).load(e,(function(t){r.texture=t,r.material=new u(ne({},{map:t},{},r.materialProperties)),r.sprite=new a(r.material)}),void 0,(function(t){throw new Error(t)})),r}return x()(i,[{key:"initialize",value:function(t){t.body=this.sprite}}],[{key:"fromJSON",value:function(t,e){var n,r,o=t.texture,s=t.materialProperties,a=void 0===s?te:s,u=t.isEnabled,c=void 0===u||u;return new i(e,o,dt(te,(r=(n=a).blending,ne({},n,{blending:r?Kt[r]:Kt[te.blending]}))),c)}}]),i}(Gt),oe=new at,se={particleEuler:null,initialize:function(t,e,n){for(var i=n.length;i--;)n[i].init(t,e);t.bindEmitter&&this.bindEmitter(t,e)},bindEmitter:function(t,e){var n=t.rotation,i=n.x,r=n.y,o=n.z;e.position.add(t.position),e.velocity.add(t.velocity),e.acceleration.add(t.acceleration),e.velocity.applyEuler(oe.set(i,r,o))}};function ae(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ue=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(ae()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(o=n.call(this,"Life",s)).lifePan=wt(t,e,r),o}return x()(i,[{key:"initialize",value:function(t){this.lifePan.a==1/0||"infi"==this.lifePan.a?t.life=1/0:t.life=this.lifePan.getValue()}}],[{key:"fromJSON",value:function(t){var e=t.min,n=t.max,r=t.center,o=void 0!==r&&r,s=t.isEnabled;return new i(e,n,o,void 0===s||s)}}]),i}(Gt);function ce(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var he=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(ce()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(r=n.call(this,"Mass",s)).massPan=wt(t,e,o),r}return x()(i,[{key:"initialize",value:function(t){t.mass=this.massPan.getValue()}}],[{key:"fromJSON",value:function(t){var e=t.min,n=t.max,r=t.center,o=void 0!==r&&r,s=t.isEnabled;return new i(e,n,o,void 0===s||s)}}]),i}(Gt),le=n(15),fe=n.n(le),de=n(27),ye=n.n(de),pe=n(16),ve=n.n(pe),me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Zone";m()(this,t),this.type=e,this.vector=new Ft(0,0,0),this.random=0,this.crossType="dead",this.log=!0,this.supportsCrossing=!0}return x()(t,[{key:"getPosition",value:function(){return null}},{key:"crossing",value:function(t){if(!this.supportsCrossing)return console.warn("".concat(this.constructor.name," does not support the crossing method"));switch(this.crossType){case"bound":this._bound(t);break;case"cross":this._cross(t);break;case"dead":this._dead(t)}}},{key:"isBoxZone",value:function(){return!1}},{key:"isLineZone",value:function(){return!1}},{key:"isMeshZone",value:function(){return!1}},{key:"isPointZone",value:function(){return!1}},{key:"isScreenZone",value:function(){return!1}},{key:"isSphereZone",value:function(){return!1}},{key:"_dead",value:function(t){}},{key:"_bound",value:function(t){}},{key:"_cross",value:function(t){}}]),t}();function ge(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var xe=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(ge()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s,a){var u,c,h,l,f,d;return m()(this,i),u=n.call(this,"BoxZone"),ct.isUndefined(e,r,o,s,a)?(c=h=l=0,f=d=o=t||100):ct.isUndefined(o,s,a)?(c=h=l=0,f=t,d=e,o=r):(c=t,h=e,l=r,f=o,d=s,o=a),u.x=c,u.y=h,u.z=l,u.width=f,u.height=d,u.depth=o,u.friction=.85,u.max=6,u}return x()(i,[{key:"isBoxZone",value:function(){return!0}},{key:"getPosition",value:function(){return this.vector.x=this.x+bt.randomAToB(-.5,.5)*this.width,this.vector.y=this.y+bt.randomAToB(-.5,.5)*this.height,this.vector.z=this.z+bt.randomAToB(-.5,.5)*this.depth,this.vector}},{key:"_dead",value:function(t){(t.position.x+t.radius<this.x-this.width/2||t.position.x-t.radius>this.x+this.width/2)&&(t.dead=!0),(t.position.y+t.radius<this.y-this.height/2||t.position.y-t.radius>this.y+this.height/2)&&(t.dead=!0),(t.position.z+t.radius<this.z-this.depth/2||t.position.z-t.radius>this.z+this.depth/2)&&(t.dead=!0)}},{key:"_bound",value:function(t){t.position.x-t.radius<this.x-this.width/2?(t.position.x=this.x-this.width/2+t.radius,t.velocity.x*=-this.friction,this._static(t,"x")):t.position.x+t.radius>this.x+this.width/2&&(t.position.x=this.x+this.width/2-t.radius,t.velocity.x*=-this.friction,this._static(t,"x")),t.position.y-t.radius<this.y-this.height/2?(t.position.y=this.y-this.height/2+t.radius,t.velocity.y*=-this.friction,this._static(t,"y")):t.position.y+t.radius>this.y+this.height/2&&(t.position.y=this.y+this.height/2-t.radius,t.velocity.y*=-this.friction,this._static(t,"y")),t.position.z-t.radius<this.z-this.depth/2?(t.position.z=this.z-this.depth/2+t.radius,t.velocity.z*=-this.friction,this._static(t,"z")):t.position.z+t.radius>this.z+this.depth/2&&(t.position.z=this.z+this.depth/2-t.radius,t.velocity.z*=-this.friction,this._static(t,"z"))}},{key:"_static",value:function(t,e){t.velocity[e]*t.acceleration[e]>0||Math.abs(t.velocity[e])<.0167*Math.abs(t.acceleration[e])*this.max&&(t.velocity[e]=0,t.acceleration[e]=0)}},{key:"_cross",value:function(t){t.position.x+t.radius<this.x-this.width/2&&t.velocity.x<=0?t.position.x=this.x+this.width/2+t.radius:t.position.x-t.radius>this.x+this.width/2&&t.velocity.x>=0&&(t.position.x=this.x-this.width/2-t.radius),t.position.y+t.radius<this.y-this.height/2&&t.velocity.y<=0?t.position.y=this.y+this.height/2+t.radius:t.position.y-t.radius>this.y+this.height/2&&t.velocity.y>=0&&(t.position.y=this.y-this.height/2-t.radius),t.position.z+t.radius<this.z-this.depth/2&&t.velocity.z<=0?t.position.z=this.z+this.depth/2+t.radius:t.position.z-t.radius>this.z+this.depth/2&&t.velocity.z>=0&&(t.position.z=this.z-this.depth/2-t.radius)}}]),i}(me);function be(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var _e=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(be()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s,a){var u;return m()(this,i),u=n.call(this,"LineZone"),t instanceof Ft?(u.x1=t.x,u.y1=t.y,u.z1=t.z,u.x2=o.x,u.y2=o.y,u.z2=o.z):(u.x1=t,u.y1=e,u.z1=r,u.x2=o,u.y2=s,u.z2=a),u.supportsCrossing=!1,u}return x()(i,[{key:"isLineZone",value:function(){return!0}},{key:"getPosition",value:function(){return this.random=Math.random(),this.vector.x=this.x1+this.random*(this.x2-this.x1),this.vector.y=this.y1+this.random*(this.y2-this.y1),this.vector.z=this.z1+this.random*(this.z2-this.z1),this.vector}}]),i}(me);function we(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ze=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(we()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(m()(this,i),(e=n.call(this,"MeshZone")).geometry=null,e.scale=r,e.supportsCrossing=!1,t.type&&"Geometry"===t.type&&(e.geometry=t),t.geometry&&(e.geometry=t.geometry),!e.geometry)throw new Error("MeshZone unable to set geometry from the supplied bounds");return e.geometry.isBufferGeometry&&(e.geometry=(new o).fromBufferGeometry(e.geometry)),e}return x()(i,[{key:"isMeshZone",value:function(){return!0}},{key:"getPosition",value:function(){var t=this.geometry.vertices,e=t[t.length*Math.random()>>0];return this.vector.x=e.x*this.scale,this.vector.y=e.y*this.scale,this.vector.z=e.z*this.scale,this.vector}}]),i}(me);function Re(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ke=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Re()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s;return m()(this,i),o=n.call(this,"PointZone"),ct.isUndefined(t,e,r)?s=0:(s=t,e,r),o.x=s,o.y=s,o.z=s,o.supportsCrossing=!1,o}return x()(i,[{key:"isPointZone",value:function(){return!0}},{key:"getPosition",value:function(){return this.vector.x=this.x,this.vector.y=this.y,this.vector.z=this.z,this.vector}}]),i}(me);function Me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Pe,Oe,Ee=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Me()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o){var s;m()(this,i),(s=n.call(this,"ScreenZone")).camera=t,s.renderer=e,s.dis=r||20,o=o||"1234";for(var a=1;a<5;a++)s["d"+a]=o.indexOf(a+"")>=0;return s}return x()(i,[{key:"isScreenZone",value:function(){return!0}},{key:"_dead",value:function(t){var e=ut.toScreenPos(t.position,this.camera,this.renderer.domElement),n=this.renderer.domElement;(e.y+t.radius<-this.dis&&this.d1||e.y-t.radius>n.height+this.dis&&this.d3)&&(t.dead=!0),(e.x+t.radius<-this.dis&&this.d4||e.x-t.radius>n.width+this.dis&&this.d2)&&(t.dead=!0)}},{key:"_bound",value:function(t){var e=ut.toScreenPos(t.position,this.camera,this.renderer.domElement),n=this.renderer.domElement;(e.y+t.radius<-this.dis||e.y-t.radius>n.height+this.dis)&&(t.velocity.y*=-1),(e.x+t.radius<-this.dis||e.x-t.radius>n.width+this.dis)&&(t.velocity.y*=-1)}}]),i}(me);function Se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}Ee.prototype.getPosition=(Oe=new Ft,function(){return Pe=this.renderer.domElement,Oe.x=Math.random()*Pe.width,Oe.y=Math.random()*Pe.height,this.vector.copy(ut.toSpacePos(Oe,this.camera,Pe)),this.vector}),Ee.prototype._cross=function(){var t=new Ft;return function(e){var n=ut.toScreenPos(e.position,this.camera,this.renderer.domElement),i=this.renderer.domElement;n.y+e.radius<-this.dis?(t.x=n.x,t.y=i.height+this.dis+e.radius,e.position.y=ut.toSpacePos(t,this.camera,i).y):n.y-e.radius>i.height+this.dis&&(t.x=n.x,t.y=-this.dis-e.radius,e.position.y=ut.toSpacePos(t,this.camera,i).y),n.x+e.radius<-this.dis?(t.y=n.y,t.x=i.width+this.dis+e.radius,e.position.x=ut.toSpacePos(t,this.camera,i).x):n.x-e.radius>i.width+this.dis&&(t.y=n.y,t.x=-this.dis-e.radius,e.position.x=ut.toSpacePos(t,this.camera,i).x)}}();var Te,Ae,je,Ce,De,Be,Ve=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Se()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o){var s,a,u;return m()(this,i),s=n.call(this,"SphereZone"),ct.isUndefined(e,r,o)?(a=0,u=t||100):(a=t,e,r,u=o),s.x=a,s.y=a,s.z=a,s.radius=u,s.the=s.phi=0,s}return x()(i,[{key:"isSphereZone",value:function(){return!0}},{key:"_dead",value:function(t){t.position.distanceTo(this)-t.radius>this.radius&&(t.dead=!0)}},{key:"_cross",value:function(){console.warn("".concat(this.constructor.name," does not support the _cross method"))}}]),i}(me);function Ie(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}Ve.prototype.getPosition=function(){return this.random=Math.random(),je=this.random*this.radius,Te=w*Math.random(),Ae=2*w*Math.random(),this.vector.x=this.x+je*Math.sin(Te)*Math.cos(Ae),this.vector.y=this.y+je*Math.sin(Ae)*Math.sin(Te),this.vector.z=this.z+je*Math.cos(Te),this.vector},Ve.prototype._bound=(De=new Ft,Be=new Ft,function(t){t.position.distanceTo(this)+t.radius>=this.radius&&(De.copy(t.position).sub(this).normalize(),Be.copy(t.velocity),Ce=2*Be.dot(De),t.velocity.sub(De.scalar(Ce)))});var Fe,Ze=function(t){xt()(r,t);var e,n=(e=r,function(){var t,n=mt()(e);if(Ie()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function r(){var t;return m()(this,r),(t=n.call(this,"Position")).reset.apply(ve()(t),arguments),t}return x()(r,[{key:"reset",value:function(){this.zones?this.zones.length=0:this.zones=[],this.zones=this.zones.concat(Array.prototype.slice.call(arguments))}},{key:"addZone",value:function(){this.zones=this.zones.concat(Array.prototype.slice.call(arguments))}}],[{key:"fromJSON",value:function(t){var e=t.zoneType,n=ye()(t,["zoneType"]);if(!K.includes(e))throw new Error("The zone type ".concat(e," is invalid or not yet supported"));return new r(Ut()(i[e],fe()(Object.values(n))))}}]),r}(Gt);function Le(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}Ze.prototype.initialize=function(t){(Fe=this.zones[Math.random()*this.zones.length>>0]).getPosition(),t.position.x=Fe.vector.x,t.position.y=Fe.vector.y,t.position.z=Fe.vector.z};var Ne=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Le()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(r=n.call(this,"Radius",s)).radius=wt(t,e,o),r}return x()(i,[{key:"reset",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.radius=wt(t,e,n)}},{key:"initialize",value:function(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius}}],[{key:"fromJSON",value:function(t){var e=t.width,n=t.height,r=t.center,o=void 0!==r&&r,s=t.isEnabled;return new i(e,n,o,void 0===s||s)}}]),i}(Gt);function Ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var qe=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Ue()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return m()(this,i),(t=n.call(this,"Rate")).numPan=wt(e),t.timePan=wt(r),t.startTime=0,t.nextTime=0,t.init(),t}return x()(i,[{key:"init",value:function(){this.startTime=0,this.nextTime=this.timePan.getValue()}},{key:"getValue",value:function(t){return this.startTime+=t,this.startTime>=this.nextTime?(this.init(),1==this.numPan.b?this.numPan.getValue("Float")>.5?1:0:this.numPan.getValue("Int")):0}}],[{key:"fromJSON",value:function(t){var e=t.particlesMin,n=t.particlesMax,r=t.perSecondMin,o=t.perSecondMax;return new i(new _t(e,n),new _t(r,o))}}]),i}(Gt);function Ye(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ye(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Je(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Ge=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Je()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];m()(this,i),r=n.call(this,"Texture",s);var a=t.Sprite,u=t.SpriteMaterial;return r.materialProperties=dt($t,o),r.texture=e,r.material=new u(Xe({},{map:e},{},r.materialProperties)),r.sprite=new a(r.material),r}return x()(i,[{key:"initialize",value:function(t){t.body=this.sprite}}],[{key:"fromJSON",value:function(t,e){var n,r,o=t.loadedTexture,s=t.materialProperties,a=void 0===s?te:s,u=t.isEnabled,c=void 0===u||u;return new i(e,o,dt(te,(r=(n=a).blending,Xe({},n,{blending:r?Kt[r]:Kt[te.blending]}))),c)}}]),i}(Gt);function Qe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var He=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Qe()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t){var e,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m()(this,i),(e=n.call(this,t,r)).dirVec=new Ft(0,0,0),e}return x()(i,[{key:"normalize",value:function(t){return 100*t}}]),i}(Gt);function We(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}He.prototype.initialize=function(){var t,e=new Ft(0,0,1),n=new Ft(0,0,0);return function(i){return t=this.tha*Math.random(),this._useV&&this.dirVec.copy(this.dir).scalar(this.radiusPan.getValue()),bt.getNormal(this.dirVec,e),n.copy(this.dirVec).applyAxisAngle(e,t),n.applyAxisAngle(this.dirVec.normalize(),Math.random()*w*2),i.velocity.copy(n),this}}();var Ke=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(We()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return m()(this,i),(r=n.call(this,"PolarVelocity",o)).tha=e*z,r.dirVec=t.toVector3D(),r._useV=!1,r}return x()(i,null,[{key:"fromJSON",value:function(t){var e=t.polarRadius,n=t.polarTheta,r=t.polarPhi,o=t.velocityTheta,s=t.isEnabled,a=void 0===s||s;return new i(new Zt(e,n,r),o,a)}}]),i}(He);function $e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var tn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if($e()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(o=n.call(this,"RadialVelocity",s)).radiusPan=wt(t),o.dir=e.clone().normalize(),o.tha=r*z,o._useV=!0,o}return x()(i,null,[{key:"fromJSON",value:function(t){var e=t.radius,n=t.x,r=t.y,o=t.z,s=t.theta,a=t.isEnabled,u=void 0===a||a;return new i(e,new Ft(n,r,o),s,u)}}]),i}(He);function en(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var nn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(en()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return m()(this,i),(r=n.call(this,"VectorVelocity",o)).radiusPan=wt(1),r.dir=t.clone(),r.tha=e*z,r._useV=!0,r}return x()(i,null,[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.theta,s=t.isEnabled,a=void 0===s||s;return new i(new Ft(e,n,r),o,a)}}]),i}(He),rn=new qe(1,.1),on=n(9),sn=n.n(on);function an(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var un=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(an()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t){var e;return m()(this,i),(e=n.call(this,t)).type="Emitter",e.particles=[],e.initializers=[],e.behaviours=[],e.emitterBehaviours=[],e.currentEmitTime=0,e.totalEmitTimes=-1,e.damping=.006,e.bindEmitter=!0,e.bindEmitterEvent=!1,e.rate=rn,e.isEmitting=!1,e.id="emitter-".concat(lt()),e.cID=0,e.name="Emitter",e.index=void 0,e.eventDispatcher=new Jt,e}return x()(i,[{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.eventDispatcher.dispatchEvent(t,e)}},{key:"setRate",value:function(t){return this.rate=t,this}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.position,n=t.x,i=void 0===n?e.x:n,r=t.y,o=void 0===r?e.y:r,s=t.z,a=void 0===s?e.z:s;return this.position.set(i,o,a),this}},{key:"setRotation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.rotation,n=t.x,i=void 0===n?e.x:n,r=t.y,o=void 0===r?e.y:r,s=t.z,a=void 0===s?e.z:s;return this.rotation.set(i,o,a),this}},{key:"emit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;return this.currentEmitTime=0,this.totalEmitTimes=sn()(t)?t:1/0,this.life=1===t?t:sn()(e)?e:1/0,this.rate.init(),this.isEmitting=!0,this}},{key:"experimental_emit",value:function(){var t=this.isEmitting,e=this.totalEmitTimes,n=this.life;return t||(this.currentEmitTime=0,e||this.setTotalEmitTimes(1/0),n||this.setLife(1/0),this.rate.init(),this.isEmitting=!0),this}},{key:"setTotalEmitTimes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return this.totalEmitTimes=sn()(t)?t:1/0,this}},{key:"setLife",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;return 1===this.totalEmitTimes?this.life=this.totalEmitTimes:this.life=sn()(t)?t:1/0,this}},{key:"stopEmit",value:function(){this.totalEmitTimes=-1,this.currentEmitTime=0,this.isEmitting=!1}},{key:"removeAllParticles",value:function(){for(var t=this.particles.length;t--;)this.particles[t].dead=!0}},{key:"addInitializer",value:function(t){return this.initializers.push(t),this}},{key:"addInitializers",value:function(t){for(var e=t.length;e--;)this.addInitializer(t[e]);return this}},{key:"setInitializers",value:function(t){return this.initializers=t,this}},{key:"removeInitializer",value:function(t){var e=this.initializers.indexOf(t);return e>-1&&this.initializers.splice(e,1),this}},{key:"removeAllInitializers",value:function(){return ct.destroyArray(this.initializers),this}},{key:"addBehaviour",value:function(t){return this.behaviours.push(t),this}},{key:"addBehaviours",value:function(t){for(var e=t.length;e--;)this.addBehaviour(t[e]);return this}},{key:"setBehaviours",value:function(t){return this.behaviours=t,this}},{key:"removeBehaviour",value:function(t){var e=this.behaviours.indexOf(t);return e>-1&&this.behaviours.splice(e,1),this}},{key:"removeAllBehaviours",value:function(){return ct.destroyArray(this.behaviours),this}},{key:"addEmitterBehaviour",value:function(t){return this.emitterBehaviours.push(t),t.initialize(this),this}},{key:"addEmitterBehaviours",value:function(t){for(var e=t.length;e--;)this.addEmitterBehaviour(t[e]);return this}},{key:"setEmitterBehaviours",value:function(t){var e=t.length;this.emitterBehaviours=t;for(var n=0;n<e;n++)this.emitterBehaviours[n].initialize(this);return this}},{key:"removeEmitterBehaviour",value:function(t){var e=this.emitterBehaviours.indexOf(t);return e>-1&&this.emitterBehaviours.splice(e,1),this}},{key:"removeAllEmitterBehaviours",value:function(){return ct.destroyArray(this.emitterBehaviours),this}},{key:"addOnEmitterDeadEventListener",value:function(t){return this.eventDispatcher.addEventListener("".concat(this.id,"_").concat(Xt.b),(function(){return t()})),this}},{key:"createParticle",value:function(){var t=this.parent.pool.get(Lt),e=this.particles.length;return this.setupParticle(t,e),this.parent&&this.parent.dispatch(Xt.d,t),this.bindEmitterEvent&&this.dispatch(Xt.d,t),t}},{key:"setupParticle",value:function(t,e){var n=this.initializers,i=this.behaviours;se.initialize(this,t,n),t.addBehaviours(i),t.parent=this,t.index=e,this.particles.push(t)}},{key:"update",value:function(t){if(this.isEmitting){this.age+=t,(this.dead||this.age>=this.life)&&this.destroy(),this.generate(t),this.integrate(t);for(var e=this.particles.length;e--;){var n=this.particles[e];n.dead&&(this.parent&&this.parent.dispatch(Xt.e,n),this.bindEmitterEvent&&this.dispatch(Xt.e,n),this.parent.pool.expire(n.reset()),this.particles.splice(e,1))}this.updateEmitterBehaviours(t)}}},{key:"updateEmitterBehaviours",value:function(t){if(!this.sleep)for(var e=this.emitterBehaviours.length,n=0;n<e;n++)this.emitterBehaviours[n].applyBehaviour(this,t,n)}},{key:"integrate",value:function(t){var e=this.parent?this.parent.integrationType:At,n=1-this.damping;Vt(this,t,n,e);for(var i=this.particles.length;i--;){var r=this.particles[i];r.update(t,i),Vt(r,t,n,e),this.parent&&this.parent.dispatch(Xt.f,r),this.bindEmitterEvent&&this.dispatch(Xt.f,r)}}},{key:"generate",value:function(t){if(1!==this.totalEmitTimes){if(this.currentEmitTime+=t,this.currentEmitTime<this.totalEmitTimes){var e=this.rate.getValue(t);for(e>0&&(this.cID=e);e--;)this.createParticle()}}else{var n=this.rate.getValue(99999);for(n>0&&(this.cID=n);n--;)this.createParticle();this.totalEmitTimes=0}}},{key:"destroy",value:function(){this.dead=!0,this.energy=0,this.totalEmitTimes=-1,0==this.particles.length&&(this.isEmitting=!1,this.removeAllInitializers(),this.removeAllBehaviours(),this.dispatch("".concat(this.id,"_").concat(Xt.b)),this.parent&&this.parent.removeEmitter(this))}}]),i}(Lt),cn=n(5),hn=n.n(cn),ln=k,fn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ln,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Behaviour",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];m()(this,t),this.type=i,this.isEnabled=r,this.id="behaviour-".concat(lt()),this.life=e,this.easing=n,this.age=0,this.energy=1,this.dead=!1}return x()(t,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ln;this.life=t,this.easing=e||ln}},{key:"normalizeForce",value:function(t){return t.scalar(100)}},{key:"normalizeValue",value:function(t){return 100*t}},{key:"initialize",value:function(t){}},{key:"applyBehaviour",value:function(t,e,n){this.isEnabled&&this.mutate(t,e,n)}},{key:"mutate",value:function(t,e,n){}},{key:"energize",value:function(t,e){if(!this.dead){if(this.age+=e,this.age>=this.life)return this.energy=0,void(this.dead=!0);var n=this.easing(t.age/t.life);this.energy=Math.max(1-n,0)}}},{key:"destroy",value:function(){}},{key:"fromJSON",value:function(t){}},{key:"life",set:function(t){this._life=sn()(t)?t:1/0},get:function(){return this._life}}]),t}();function dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var yn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(dn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return m()(this,i),(t=n.call(this,o,s,"Alpha",a)).alphaA=e,t.alphaB=r,t.reset(e,r),t}return x()(i,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;this.same=null==e,this.alphaA=wt(t),this.alphaB=wt(e),n&&hn()(mt()(i.prototype),"reset",this).call(this,n,r)}},{key:"initialize",value:function(t){t.useAlpha=!0,t.transform.alphaA=this.alphaA.getValue(),t.transform.alphaB=this.same?t.transform.alphaA:this.alphaB.getValue()}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),t.alpha=bt.lerp(t.transform.alphaA,t.transform.alphaB,this.energy),t.alpha<.002&&(t.alpha=0)}},{key:"same",get:function(){return this._same},set:function(t){this._same=t}}],[{key:"fromJSON",value:function(t){var e=t.alphaA,n=t.alphaB,r=t.life,o=t.easing,s=t.isEnabled,a=void 0===s||s;return new i(e,n,r,G(o),a)}}]),i}(fn);function pn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var vn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(pn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ft,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ln,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return m()(this,i),(t=n.call(this,s,a,"Attraction",u)).targetPosition=e,t.radius=o,t.force=t.normalizeValue(r),t.radiusSq=t.radius*t.radius,t.attractionForce=new Ft,t.lengthSq=0,t}return x()(i,[{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ft,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;this.targetPosition=t,this.radius=n,this.force=this.normalizeValue(e),this.radiusSq=this.radius*this.radius,this.attractionForce=new Ft,this.lengthSq=0,r&&hn()(mt()(i.prototype),"reset",this).call(this,r,o)}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.position),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.scalar(1-this.lengthSq/this.radiusSq),this.attractionForce.scalar(this.force),t.acceleration.add(this.attractionForce))}}],[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.force,s=t.radius,a=t.life,u=t.easing,c=t.isEnabled,h=void 0===c||c;return new i(new Ft(e,n,r),o,s,a,G(u),h)}}]),i}(fn);function mn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var gn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(mn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s){var a,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return m()(this,i),(a=n.call(this,o,s,"Collision",u)).reset(t,e,r),a}return x()(i,[{key:"reset",value:function(t,e,n,r,o){this.emitter=t,this.useMass=e,this.onCollide=n,this.particles=[],this.delta=new Ft,r&&hn()(mt()(i.prototype),"reset",this).call(this,r,o)}},{key:"mutate",value:function(t,e,n){for(var i,r,o,s,a,u,c=this.emitter?this.emitter.particles.slice(n):this.particles.slice(n),h=c.length;h--;)(i=c[h])!=t&&(this.delta.copy(i.position).sub(t.position),(r=this.delta.lengthSq())<=(s=t.radius+i.radius)*s&&(o=s-Math.sqrt(r),o+=.5,a=this._getAverageMass(t,i),u=this._getAverageMass(i,t),t.position.add(this.delta.clone().normalize().scalar(o*-a)),i.position.add(this.delta.normalize().scalar(o*u)),this.onCollide&&this.onCollide(t,i)))}},{key:"_getAverageMass",value:function(t,e){return this.useMass?e.mass/(t.mass+e.mass):.5}},{key:"fromJSON",value:function(t){}}]),i}(fn);function xn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var bn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(xn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o){var s,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return m()(this,i),(s=n.call(this,r,o,"Color",a)).reset(t,e),s}return x()(i,[{key:"reset",value:function(t,e,n,r){this.same=null==e,this.colorA=St(t),this.colorB=St(e),n&&hn()(mt()(i.prototype),"reset",this).call(this,n,r)}},{key:"initialize",value:function(t){t.transform.colorA=et.getRGB(this.colorA.getValue()),t.useColor=!0,t.transform.colorB=this.same?t.transform.colorA:et.getRGB(this.colorB.getValue())}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),this._same?(t.color.r=t.transform.colorA.r,t.color.g=t.transform.colorA.g,t.color.b=t.transform.colorA.b):(t.color.r=bt.lerp(t.transform.colorA.r,t.transform.colorB.r,this.energy),t.color.g=bt.lerp(t.transform.colorA.g,t.transform.colorB.g,this.energy),t.color.b=bt.lerp(t.transform.colorA.b,t.transform.colorB.b,this.energy))}},{key:"same",get:function(){return this._same},set:function(t){this._same=t}}],[{key:"fromJSON",value:function(t){var e=t.colorA,n=t.colorB,r=t.life,o=t.easing,s=t.isEnabled,a=void 0===s||s;return new i(e,n,r,G(o),a)}}]),i}(fn);function _n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var wn=function(t){xt()(r,t);var e,n=(e=r,function(){var t,n=mt()(e);if(_n()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function r(t,e,i,o,s){var a;return m()(this,r),(a=n.call(this,i,o,"CrossZone",s)).reset(t,e),a}return x()(r,[{key:"reset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dead",n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.zone=t,this.zone.crossType=e,n&&hn()(mt()(r.prototype),"reset",this).call(this,n,i)}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),this.zone.crossing.call(this.zone,t)}}],[{key:"fromJSON",value:function(t){var e=t.zoneType,n=t.zoneParams,o=t.crossType,s=t.life,a=t.easing,u=t.isEnabled,c=void 0===u||u;return new r(Ut()(i[e],fe()(Object.values(n))),o,s,G(a),c)}}]),r}(fn);function zn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Rn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(zn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s){var a,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return m()(this,i),(a=n.call(this,o,s,"Force",u)).reset(t,e,r),a}return x()(i,[{key:"reset",value:function(t,e,n){this.force=this.normalizeForce(new Ft(t,e,n)),this.force.id=Math.random()}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),t.acceleration.add(this.force)}}],[{key:"fromJSON",value:function(t){var e=t.fx,n=t.fy,r=t.fz,o=t.life,s=t.easing,a=t.isEnabled,u=void 0===a||a;return new i(e,n,r,o,G(s),u)}}]),i}(fn);function kn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Mn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(kn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return m()(this,i),(o=n.call(this,0,-t,0,e,r,s)).type="Gravity",o}return x()(i,null,[{key:"fromJSON",value:function(t){var e=t.gravity,n=t.life,r=t.easing,o=t.isEnabled,s=void 0===o||o;return new i(e,n,G(r),s)}}]),i}(Rn);function Pn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var On=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Pn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.03,a=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return m()(this,i),(o=n.call(this,a,u,"RandomDrift",c)).reset(t,e,r,s),o.time=0,o}return x()(i,[{key:"reset",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.03,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;this.randomForce=this.normalizeForce(new Ft(t,e,n)),this.delayPan=wt(r),this.time=0,o&&hn()(mt()(i.prototype),"reset",this).call(this,o,s)}},{key:"mutate",value:function(t,e,n){if(this.energize(t,e,n),this.time+=e,this.time>=this.delayPan.getValue()){var i=bt.randomAToB(-this.randomForce.x,this.randomForce.x),r=bt.randomAToB(-this.randomForce.y,this.randomForce.y),o=bt.randomAToB(-this.randomForce.z,this.randomForce.z);t.acceleration.addValue(i,r,o),this.time=0}}}],[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.delay,s=t.life,a=t.easing,u=t.isEnabled,c=void 0===u||u;return new i(e,n,r,o,s,G(a),c)}}]),i}(fn);function En(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Sn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(En()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s){var a,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return m()(this,i),(a=n.call(this,t,e,r,o,s,u)).force*=-1,a.type="Repulsion",a}return x()(i,[{key:"reset",value:function(t,e,n,r,o){hn()(mt()(i.prototype),"reset",this).call(this,t,e,n,r,o),this.force*=-1}}],[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.force,s=t.radius,a=t.life,u=t.easing,c=t.isEnabled,h=void 0===c||c;return new i(new Ft(e,n,r),o,s,a,G(u),h)}}]),i}(vn);function Tn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var An=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Tn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s){var a,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return m()(this,i),(a=n.call(this,o,s,"Rotate",u)).reset(t,e,r),a}return x()(i,[{key:"reset",value:function(t,e,n,r,o){this.x=t||0,this.y=e||0,this.z=n||0,void 0===t||"same"==t?this.rotationType="same":null==e?this.rotationType="set":void 0===n?this.rotationType="to":(this.rotationType="add",this.x=wt(this.x*z),this.y=wt(this.y*z),this.z=wt(this.z*z)),r&&hn()(mt()(i.prototype),"reset",this).call(this,r,o)}},{key:"initialize",value:function(t){switch(this.rotationType){case"same":break;case"set":this._setRotation(t.rotation,this.x);break;case"to":t.transform.fR=t.transform.fR||new Ft,t.transform.tR=t.transform.tR||new Ft,this._setRotation(t.transform.fR,this.x),this._setRotation(t.transform.tR,this.y);break;case"add":t.transform.addR=new Ft(this.x.getValue(),this.y.getValue(),this.z.getValue())}}},{key:"_setRotation",value:function(t,e){if(t=t||new Ft,"random"==e){var n=bt.randomAToB(-w,w),i=bt.randomAToB(-w,w),r=bt.randomAToB(-w,w);t.set(n,i,r)}else e instanceof Ft&&t.copy(e)}},{key:"mutate",value:function(t,e,n){switch(this.energize(t,e,n),this.rotationType){case"same":t.rotation||(t.rotation=new Ft),t.rotation.eulerFromDir(t.velocity);break;case"set":break;case"to":t.rotation.x=bt.lerp(t.transform.fR.x,t.transform.tR.x,this.energy),t.rotation.y=bt.lerp(t.transform.fR.y,t.transform.tR.y,this.energy),t.rotation.z=bt.lerp(t.transform.fR.z,t.transform.tR.z,this.energy);break;case"add":t.rotation.add(t.transform.addR)}}},{key:"rotationType",get:function(){return this._rotationType},set:function(t){this._rotationType=t}}],[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.life,s=t.easing,a=t.isEnabled,u=void 0===a||a;return new i(e,n,r,o,G(s),u)}}]),i}(fn);function jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Cn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(jn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o){var s,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return m()(this,i),(s=n.call(this,r,o,"Scale",a)).reset(t,e),s}return x()(i,[{key:"reset",value:function(t,e,n,r){this.same=null==e,this.scaleA=wt(t||1),this.scaleB=wt(e),n&&hn()(mt()(i.prototype),"reset",this).call(this,n,r)}},{key:"initialize",value:function(t){t.transform.scaleA=this.scaleA.getValue(),t.transform.oldRadius=t.radius,t.transform.scaleB=this.same?t.transform.scaleA:this.scaleB.getValue()}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),t.scale=bt.lerp(t.transform.scaleA,t.transform.scaleB,this.energy),t.scale<5e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale}},{key:"same",get:function(){return this._same},set:function(t){this._same=t}}],[{key:"fromJSON",value:function(t){var e=t.scaleA,n=t.scaleB,r=t.life,o=t.easing,s=t.isEnabled,a=void 0===s||s;return new i(e,n,r,G(o),a)}}]),i}(fn);function Dn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Bn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Dn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r,o,s,a,u){var c,h=!(arguments.length>7&&void 0!==arguments[7])||arguments[7];return m()(this,i),(c=n.call(this,a,u,"Spring",h)).reset(t,e,r,o,s),c}return x()(i,[{key:"reset",value:function(t,e,n,i,r){this.pos?this.pos.set(t,e,n):this.pos=new Ft(t,e,n),this.spring=i||.1,this.friction=r||.98}},{key:"mutate",value:function(t,e,n){this.energize(t,e,n),t.velocity.x+=(this.pos.x-t.position.x)*this.spring,t.velocity.y+=(this.pos.y-t.position.y)*this.spring,t.velocity.z+=(this.pos.z-t.position.z)*this.spring}}],[{key:"fromJSON",value:function(t){var e=t.x,n=t.y,r=t.z,o=t.spring,s=t.friction,a=t.life,u=t.easing,c=t.isEnabled,h=void 0===c||c;return new i(e,n,r,o,s,a,G(u),h)}}]),i}(fn),Vn=function(t){var e=[];return t.forEach((function(t){var n=t.type,i=t.properties;if(!W.includes(n))throw new Error("The behaviour type ".concat(n," is invalid or not yet supported"));e.push(new o[n].fromJSON(i))})),e},In=function(t,e,n,i){var o=t.preParticles,s=void 0===o?500:o,a=t.integrationType,u=void 0===a?"euler":a,c=t.emitters,h=void 0===c?[]:c,l=new n(e,s,u);return h.forEach((function(t){var n=new i,o=t.rate,s=t.rotation,a=t.initializers,u=t.behaviours,c=t.emitterBehaviours,h=void 0===c?[]:c,f=t.position,d=t.totalEmitTimes,y=void 0===d?1/0:d,p=t.life,v=void 0===p?1/0:p;n.setRate(function(t){return new qe.fromJSON(t)}(o)).setRotation(s).setInitializers(function(t,e){var n=[];return t.forEach((function(t){var i=t.type,o=t.properties;if(!H.includes(i))throw new Error("The initializer type ".concat(i," is invalid or not yet supported"));b.includes(i)?n.push(new r[i].fromJSON(o,e)):n.push(new r[i].fromJSON(o))})),n}(a,e)).setBehaviours(Vn(u)).setEmitterBehaviours(Vn(h)).setPosition(f).emit(y,v),l.addEmitter(n)})),l};function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var Zn=function(t,e){return new Promise((function(n,i){if(!t.length)return n([]);var o=t.length,s=[],a=t.filter((function(t){return!t.properties.texture})),u=t.filter((function(t){return t.properties.texture}));a.forEach((function(t){var a=t.type,u=t.properties;return H.includes(a)?(b.includes(a)?s.push(new r[a].fromJSON(u,e)):s.push(new r[a].fromJSON(u)),s.length===o?n(s):void 0):i("The initializer type ".concat(a," is invalid or not yet supported"))})),u.forEach((function(t){var r=t.type,a=t.properties,u=t.properties.texture,c=new e.TextureLoader;if(!H.includes(r))return i("The initializer type ".concat(r," is invalid or not yet supported"));c.load(u,(function(t){if(s.push(new Ge.fromJSON(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a,{loadedTexture:t}),e)),s.length===o)return n(s)}),void 0,i)}))}))},Ln=function(t){return new Promise((function(e,n){if(!t.length)return e([]);var i=t.length,r=[];t.forEach((function(t){var s=t.type,a=t.properties;return W.includes(s)?(r.push(new o[s].fromJSON(a)),r.length===i?e(r):void 0):n("The behaviour type ".concat(s," is invalid or not yet supported"))}))}))},Nn=function(t,e,n,i){return new Promise((function(r,o){if(!t.length)return r([]);var s=[],a=t.length;if(!a)return r(s);t.forEach((function(t){var u,c=new e,h=t.rate,l=t.rotation,f=t.initializers,d=t.behaviours,y=t.emitterBehaviours,p=void 0===y?[]:y,v=t.position,m=t.totalEmitTimes,g=void 0===m?1/0:m,x=t.life,b=void 0===x?1/0:x;c.setRate((u=h,new qe.fromJSON(u))).setRotation(l).setPosition(v),Zn(f,n).then((function(t){return c.setInitializers(t),Ln(d)})).then((function(t){return c.setBehaviours(t),Ln(p)})).then((function(t){return c.setEmitterBehaviours(t),Promise.resolve(c)})).then((function(t){if(s.push(i?t.emit(g,b):t.setTotalEmitTimes(g).setLife(b)),s.length===a)return r(s)})).catch(o)}))}))},Un=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=r.shouldAutoEmit,s=void 0===o||o;return new Promise((function(r,o){var a=t.preParticles,u=void 0===a?500:a,c=t.integrationType,h=void 0===c?"euler":c,l=t.emitters,f=void 0===l?[]:l,d=new n(u,h);Nn(f,i,e,s).then((function(t){var e=t.length;if(!e)return r(d);t.forEach((function(t){d.addEmitter(t),d.emitters.length===e&&r(d)}))})).catch(o)}))},qn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:At;m()(this,t),this.type="System",this.canUpdate=!0,this.preParticles=e,this.integrationType=n,this.emitters=[],this.renderers=[],this.pool=new qt,this.eventDispatcher=new Jt}return x()(t,[{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;this.eventDispatcher.dispatchEvent(t,e)}},{key:"addRenderer",value:function(t){return this.renderers.push(t),t.init(this),this}},{key:"removeRenderer",value:function(t){return this.renderers.splice(this.renderers.indexOf(t),1),t.remove(this),this}},{key:"addEmitter",value:function(t){var e=this.emitters.length;return t.parent=this,t.index=e,this.emitters.push(t),this.dispatch(Xt.a,t),this}},{key:"removeEmitter",value:function(t){return t.parent!==this||(t.parent=null,t.index=void 0,this.emitters.splice(this.emitters.indexOf(t),1),this.dispatch(Xt.c,t)),this}},{key:"emit",value:function(t){var e=t.onStart,n=t.onUpdate,i=t.onEnd;e&&e(),n&&this.eventDispatcher.addEventListener(Xt.g,n);var r=this.emitters.map((function(t){return t.life===1/0?(i&&i(),t.experimental_emit(),Promise.resolve()):new Promise((function(e){t.addOnEmitterDeadEventListener((function(){i&&i(),e()})),t.experimental_emit()}))}));try{return Promise.all(r)}catch(t){console.warn(t)}}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.0167,e=t||.0167;if(this.canUpdate){if(e>0)for(var n=this.emitters.length;n--;){var i=this.emitters[n];i.update(e),i.isEmitting&&this.dispatch(Xt.g)}this.dispatch(Xt.h)}return Promise.resolve()}},{key:"getCount",value:function(){var t,e=this.emitters.length,n=0;for(t=0;t<e;t++)n+=this.emitters[t].particles.length;return n}},{key:"destroy",value:function(){var t=this.emitters.length;this.canUpdate=!1;for(var e=0;e<t;e++)this.emitters[e]&&this.emitters[e].destroy(),delete this.emitters[e];this.emitters.length=0,this.pool.destroy(),this.canUpdate=!0}}],[{key:"fromJSON",value:function(e,n){return In(e,n,t,un)}},{key:"fromJSONAsync",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.shouldAutoEmit,o=void 0!==r&&r;return Un(e,n,t,un,{shouldAutoEmit:o})}}]),t}(),Yn={addEventListener:function(t,e){return t.eventDispatcher.addEventListener("SYSTEM_UPDATE",e),this},drawZone:function(t,e,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o="#2194ce",s=!0,a=r.width,u=void 0===a?15:a,c=r.height,h=void 0===c?15:c,l=r.depth,f=void 0===l?15:l,d=r.radius,y=void 0===d?15:d,p=r.x,v=void 0===p?0:p,m=r.y,g=void 0===m?0:m,x=r.z,b=void 0===x?0:x;r.isPointZone()&&(i=new t.SphereGeometry(15)),r.isLineZone(),r.isBoxZone()&&(i=new t.BoxGeometry(u,h,f)),r.isSphereZone()&&(i=new t.SphereGeometry(y,15,15)),r.isMeshZone()&&(i=r.geometry.geometry?r.geometry.geometry.clone():r.geometry.clone()),i||(i=new t.BoxGeometry(u,h,f));var _=new t.MeshBasicMaterial({color:o,wireframe:s}),w=new t.Mesh(i.clone(),_);n.add(w),this.addEventListener(e,(function(){w.position.set(v,g,b)}))},drawEmitter:function(t,e,n,i,r){var o=new t.OctahedronGeometry(15),s=new t.MeshBasicMaterial({color:r||"#aaa",wireframe:!0}),a=new t.Mesh(o.clone(),s);n.add(a),this.addEventListener(e,(function(){a.position.copy(i.position),a.rotation.set(i.rotation.x,i.rotation.y,i.rotation.z)}))},renderInfo:function(){function t(t,e){var n="material"==t?"_materialPool":"_targetPool";return e.renderers[0][n].cID}return function(e,n){this.addInfo(n);var i="";switch(this._infoType){case 2:i+="emitter:"+e.emitters.length+"<br>",i+="em speed:"+e.emitters[0].cID+"<br>",i+="pos:"+function(t){var e=t.emitters[0];return Math.round(e.p.x)+","+Math.round(e.p.y)+","+Math.round(e.p.z)}(e);break;case 3:i+=e.renderers[0].name+"<br>",i+="target:"+t("target")+"<br>",i+="material:"+t("material");break;default:i+="particles:"+e.getCount()+"<br>",i+="pool:"+e.pool.getCount()+"<br>",i+="total:"+(e.getCount()+e.pool.getCount())}this._infoCon.innerHTML=i}}(),addInfo:function(t){var e=this;if(!this._infoCon){var n,i;switch(this._infoCon=document.createElement("div"),this._infoCon.style.cssText=["position:fixed;bottom:0px;left:0;cursor:pointer;","opacity:0.9;z-index:10000;padding:10px;font-size:12px;","width:120px;height:50px;background-color:#002;color:#0ff;"].join(""),this._infoType=1,this._infoCon.addEventListener("click",(function(){e._infoType++,e._infoType>3&&(e._infoType=1)}),!1),t){case 2:n="#201",i="#f08";break;case 3:n="#020",i="#0f0";break;default:n="#002",i="#0ff"}this._infoCon.style["background-color"]=n,this._infoCon.style.color=i}this._infoCon.parentNode||document.body.appendChild(this._infoCon)}},Xn=function(){var t=0;if(window.console&&window.console.trace){var e=Array.prototype.slice.call(arguments),n=arguments[0]+"";if(0==n.indexOf("+")){var i=parseInt(arguments[0]);t<i&&(e.shift(),console.trace.apply(console,e),t++)}else e.unshift("+15"),this.apply(console,e)}};function Jn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Gn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Jn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e,r){var o;return m()(this,i),(o=n.call(this,r)).type="FollowEmitter",o.mouseTarget=ct.initValue(t,window),o.ease=ct.initValue(e,.7),o._allowEmitting=!1,o.initEventHandler(),o}return x()(i,[{key:"initEventHandler",value:function(){var t=this;this.mousemoveHandler=function(e){t.mousemove.call(t,e)},this.mousedownHandler=function(e){t.mousedown.call(t,e)},this.mouseupHandler=function(e){t.mouseup.call(t,e)},this.mouseTarget.addEventListener("mousemove",this.mousemoveHandler,!1)}},{key:"emit",value:function(){this._allowEmitting=!0}},{key:"stopEmit",value:function(){this._allowEmitting=!1}},{key:"setCameraAndCanvas",value:function(t,e){this.camera=t,this.canvas=e}},{key:"mousemove",value:function(t){t.layerX||0==t.layerX?(this.position.x+=(t.layerX-this.position.x)*this.ease,this.position.y+=(t.layerY-this.position.y)*this.ease):(t.offsetX||0==t.offsetX)&&(this.position.x+=(t.offsetX-this.position.x)*this.ease,this.position.y+=(t.offsetY-this.position.y)*this.ease),this.position.copy(ut.toSpacePos(this.position,this.camera,this.canvas)),this._allowEmitting&&hn()(mt()(i.prototype),"emit",this).call(this,"once")}},{key:"destroy",value:function(){hn()(mt()(i.prototype),"destroy",this).call(this),this.mouseTarget.removeEventListener("mousemove",this.mousemoveHandler,!1)}}]),i}(un),Qn=n(11);function Hn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var Wn=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Hn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(){var t;return m()(this,i),(t=n.call(this,_.b)).targetPool=new qt,t.materialPool=new qt,t}return x()(i,[{key:"onSystemUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){}},{key:"onParticleUpdate",value:function(t){}},{key:"onParticleDead",value:function(t){}}]),i}(Qn.a);function Kn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var $n=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(Kn()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r;return m()(this,i),(r=n.call(this,_.d)).container=t,r._targetPool=new qt,r._materialPool=new qt,r._body=new e.Mesh(new e.BoxGeometry(50,50,50),new e.MeshLambertMaterial({color:"#ff0000"})),r}return x()(i,[{key:"onSystemUpdate",value:function(){}},{key:"onParticleCreated",value:function(t){t.target||(t.body||(t.body=this._body),t.target=this._targetPool.get(t.body),(t.useAlpha||t.useColor)&&(t.target.material.__puid=nt.id(t.body.material),t.target.material=this._materialPool.get(t.target.material))),t.target&&(t.target.position.copy(t.position),this.container.add(t.target))}},{key:"onParticleUpdate",value:function(t){t.target&&(t.target.position.copy(t.position),t.target.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),this.scale(t),t.useAlpha&&(t.target.material.opacity=t.alpha,t.target.material.transparent=!0),t.useColor&&t.target.material.color.copy(t.color))}},{key:"scale",value:function(t){t.target.scale.set(t.scale,t.scale,t.scale)}},{key:"onParticleDead",value:function(t){t.target&&((t.useAlpha||t.useColor)&&this._materialPool.expire(t.target.material),this._targetPool.expire(t.target),this.container.remove(t.target),t.target=null)}}]),i}(Qn.a);function ti(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var ei,ni,ii=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(ti()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r;return m()(this,i),(r=n.call(this,t,e)).type=_.e,r._body=new e.Sprite(new e.SpriteMaterial({color:16777215})),r}return x()(i,[{key:"scale",value:function(t){t.target.scale.set(t.scale*t.radius,t.scale*t.radius,1)}}]),i}($n),ri=function(){function t(e){m()(this,t),this.position=new e.Vector3,this.size=0,this.color=new e.Color,this.alpha=0,this.texture=null,this.index=0}return x()(t,[{key:"reset",value:function(){this.position.set(0,0,0),this.size=0,this.color.setRGB(0,0,0),this.alpha=0,this.texture=null}}]),t}(),oi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;m()(this,t),this.max=e,this.items=[]}return x()(t,[{key:"add",value:function(t){if(!this.has(t)){if(this.items.length+1===this.max)throw new Error("UniqueList max size exceeded");this.items.push(t)}}},{key:"has",value:function(t){return this.items.indexOf(t)>0}},{key:"find",value:function(t){return this.items.indexOf(t)}}]),t}(),si=function(){return"\n    attribute float size;\n    attribute vec3 color;\n    attribute float alpha;\n\n    varying vec3 targetColor;\n    varying float targetAlpha;\n\n    void main() {\n      vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n      targetColor = color;\n      targetAlpha = alpha;\n\n      gl_PointSize = size * (".concat("600.0"," / -mvPosition.z);\n      gl_Position = projectionMatrix * mvPosition;\n    }\n")},ai=["x","y","z"].length,ui=["r","g","b","a"].length,ci=([4*ai,4,4*ui].reduce((function(t,e){return t+e})),{blending:"AdditiveBlending",baseColor:16777215,depthTest:!0,depthWrite:!1,transparent:!0,maxParticles:1e4}),hi=["x","y","z"].length,li=["r","g","b","a"].length,fi=[4*hi,4,4*li].reduce((function(t,e){return t+e})),di={position:hi,size:1,color:li,alpha:1},yi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,n=arguments.length>1?arguments[1]:void 0;m()(this,t),ei=n,this.maxParticles=e,this.createInterleavedBuffer().createBufferGeometry()}return x()(t,[{key:"createInterleavedBuffer",value:function(){var t=new ArrayBuffer(this.maxParticles*fi);return this.interleavedBuffer=new ei.InterleavedBuffer(new Float32Array(t),fi),this}},{key:"createBufferGeometry",value:function(){this.geometry=new ei.BufferGeometry;var t=this.interleavedBuffer,e=this.geometry;return Object.keys(di).reduce((function(n,i){var r=di[i];return e.setAttribute(i,new ei.InterleavedBufferAttribute(t,r,n)),n+r}),0),this}},{key:"buffer",get:function(){return this.interleavedBuffer}},{key:"stride",get:function(){return fi}}]),t}();function pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pi(Object(n),!0).forEach((function(e){tt()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mi(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var gi=function(t){xt()(i,t);var e,n=(e=i,function(){var t,n=mt()(e);if(mi()){var i=mt()(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return pt()(this,t)});function i(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ci;m()(this,i),r=n.call(this,_.c),ni=e;var s=vi({},ci,{},o),a=s.camera,u=s.maxParticles,c=s.baseColor,h=s.blending,l=s.depthTest,f=s.depthWrite,d=s.transparent,y=new yi(u,ni),p=new ni.ShaderMaterial({uniforms:{baseColor:{value:new ni.Color(c)},texture:{value:null}},vertexShader:si(),fragmentShader:"\n    uniform vec3 baseColor;\n    uniform sampler2D texture;\n\n    varying vec3 targetColor;\n    varying float targetAlpha;\n\n    void main() {\n      gl_FragColor = vec4(baseColor * targetColor, targetAlpha);\n      gl_FragColor = gl_FragColor * texture2D(texture, gl_PointCoord);\n    }\n",blending:ni[h],depthTest:l,depthWrite:f,transparent:d});return r.camera=a,r.targetPool=new qt,r.uniqueList=new oi(u),r.particleBuffer=y,r.buffer=y.buffer,r.stride=y.stride,r.geometry=y.geometry,r.material=p,r.points=new ni.Points(r.geometry,r.material),t.add(r.points),r}return x()(i,[{key:"onParticleCreated",value:function(t){t.target||(t.target=this.targetPool.get(ri,ni),this.uniqueList.add(t.id)),this.updateTarget(t).mapParticleTargetPropsToPoint(t)}},{key:"onParticleUpdate",value:function(t){t.target&&this.updateTarget(t).mapParticleTargetPropsToPoint(t)}},{key:"onParticleDead",value:function(t){t.target&&(t.target.reset(),this.mapParticleTargetPropsToPoint(t),t.target=null)}},{key:"updateTarget",value:function(t){var e=t.position,n=t.scale,i=t.radius,r=t.color,o=t.alpha,s=t.body,a=t.id,u=r.r,c=r.g,h=r.b;return t.target.position.copy(e),t.target.size=n*i,t.target.color.setRGB(u,c,h),t.target.alpha=o,t.target.index=this.uniqueList.find(a),s&&s instanceof ni.Sprite&&(t.target.texture=s.material.map,this.material.uniforms.texture={value:t.target.texture}),this}},{key:"mapParticleTargetPropsToPoint",value:function(t){return this.updatePointPosition(t).updatePointSize(t).updatePointColor(t).updatePointAlpha(t).ensurePointUpdatesAreRendered(),this}},{key:"updatePointPosition",value:function(t){var e=this.geometry,n=this.stride,i=this.buffer,r=t.target,o=e.attributes.position.offset;return i.array[r.index*n+o+0]=r.position.x,i.array[r.index*n+o+1]=r.position.y,i.array[r.index*n+o+2]=r.position.z,this}},{key:"updatePointSize",value:function(t){var e=this.geometry,n=this.stride,i=this.buffer,r=t.target,o=e.attributes.size.offset;return i.array[r.index*n+o+0]=r.size,this}},{key:"updatePointColor",value:function(t){var e=this.geometry,n=this.stride,i=this.buffer,r=t.target,o=e.attributes.color.offset;return i.array[r.index*n+o+0]=r.color.r,i.array[r.index*n+o+1]=r.color.g,i.array[r.index*n+o+2]=r.color.b,this}},{key:"updatePointAlpha",value:function(t){var e=this.geometry,n=this.stride,i=this.buffer,r=t.target,o=e.attributes.alpha.offset;return i.array[r.index*n+o+0]=r.alpha,this}},{key:"ensurePointUpdatesAreRendered",value:function(){var t=this;return Object.keys(this.geometry.attributes).map((function(e){t.geometry.attributes[e].data.needsUpdate=!0})),this}}]),i}(Qn.a);e.default=qn}])}));
//# sourceMappingURL=three-nebula.js.map